# Simple Docker Project

Этот проект был выполнен в рамках основного обучения в **School 21** от Сбера. <img src="materials/images/heart_21_x10.gif" alt="drawing" width="20" height="20"/>

Он посвящен изучению базовых аспектов работы с **Docker** и создание простого веб-сервера на языке **C** с использованием **FastCGI**. Проект включает разработку **Docker**-образа для веб-сервера и настройку **nginx** в качестве прокси-сервера.

![simple_docker.png](materials%2Fimages%2Fsimple_docker.png)

## Содержание

1. [Описание проекта](#1-описание-проекта)
2. [Мини веб-сервер](#2-мини-веб-сервер)
3. [Создание Docker-образа](#3-создание-docker-образа)
4. [Конфигурация nginx](#4-конфигурация-nginx)
5. [Docker Compose](#5-docker-compose)
6. [Проверка безопасности с помощью Dockle](#6-проверка-безопасности-с-помощью-dockle)
7. [Заключение](#7-заключение)

## Описание проекта

Проект представляет собой контейнеризированное приложение, в котором используется **nginx** для проксирования запросов на **FastCGI**-сервер, написанный на языке **C**. В рамках проекта был создан кастомный веб-сервер, Docker-образ, а также настройка **nginx** для проксирования запросов с порта `80` на **FastCGI**-сервер.

[Отчет о проделанной работе](src/Report_DO5)

---

## 1. Мини веб-сервер

Мини-сервер был написан на языке **C** с использованием **FastCGI**-библиотеки. Сервер обрабатывает **HTTP**-запросы и возвращает простую страницу с сообщением **"Hello, World!"**.

### Основные шаги:
- Написание C-кода для обработки запросов через FastCGI.
- Запуск сервера на порту `8080` с использованием `spawn-fcgi`.

[Код на C](src/server/mini_server.c)

[Подробнее о мини-сервере](src/Report_DO5#3-мини-веб-сервер)

---

## 2. Создание Docker-образа

**Docker-образ** для проекта собирается с нуля, включающий:
- Компиляцию исходников мини-сервера.
- Установку и настройку **nginx**.
- Запуск **FastCGI**-сервера и **nginx** в контейнере.

### Основные команды:
- Сборка образа через `docker build`.
- Запуск контейнера с маппингом порта `80` на `8080`.

[Dockerfile проекта](src/Dockerfile)

[Подробнее о создании Docker-образа](src/Report_DO5#4-свой-докер)

---

## 3. Конфигурация nginx

Nginx используется как прокси-сервер для перенаправления запросов с порта `80` на **FastCGI**-сервер, работающий на `127.0.0.1:8080`.

### Основные шаги:
- Создание кастомного конфигурационного файла **nginx**.
- Настройка **nginx** на работу с **FastCGI** и проксирование запросов.

[nginx.conf](src/nginx/nginx.conf)

---

## 4. Docker Compose

Для автоматизации развертывания нескольких контейнеров используется **Docker Compose**. С его помощью можно запустить как **FastCGI**-сервер, так и **nginx** в одной сети.

### Основные шаги:
- Написание `docker-compose.yml`, включающего контейнеры для **nginx** и **FastCGI**-сервера.
- Запуск проекта через `docker-compose up`.

[docker-compose.yml](src/docker-compose.yml)

[Подробнее о Docker Compose](src/Report_DO5#6-базовый-docker-compose)

---

## 5. Проверка безопасности с помощью Dockle

Для проверки безопасности **Docker**-образа был использован инструмент **Dockle**. Были исправлены все предупреждения, связанные с безопасностью Dockerfile, включая настройку переменных окружения и корректную работу с файлами конфигураций.

### Основные шаги:
- Сканы через `dockle [image_id]`.
- Исправление ошибок и предупреждений в `Dockerfile`.

[Подробнее о Dockle](src/Report_DO5#5-dockle)

## Заключение

Проект предоставил возможность изучить основные аспекты работы с **Docker**, а также получить практический опыт в написании мини-сервера на **C** и его контейнеризации с использованием **FastCGI** и **nginx**. Развертывание проекта с использованием **Docker Compose** позволило облегчить управление и масштабирование контейнеров. Также была проведена проверка безопасности контейнера с помощью **Dockle**.

